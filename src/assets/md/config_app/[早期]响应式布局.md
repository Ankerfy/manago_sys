### âœ… æœªä½¿ç”¨ Pinia æ—¶å®ç°æŠ˜å èœå•å“åº”å¼å¸ƒå±€çš„é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

> â€”â€” åŸºäºé¡¹ç›®åˆæœŸè®¾è®¡çš„æ¢³ç†æ–‡æ¡£

---

#### ğŸ“Œ æ¦‚è¿°

æœ¬æ–‡æ¡£æ¢³ç†äº†åœ¨ **æœªå¼•å…¥ Pinia çŠ¶æ€ç®¡ç†** çš„æƒ…å†µä¸‹ï¼Œä½¿ç”¨ Vue 3 + Element Plus æ„å»ºåå°ç®¡ç†ç³»ç»Ÿæ—¶ï¼Œå®ç° **ä¾§è¾¹æ æŠ˜å èœå•ä¸ä¸»å¸ƒå±€è”åŠ¨å“åº”å¼è°ƒæ•´** æ‰€é‡åˆ°çš„æ ¸å¿ƒé—®é¢˜åŠå…¶è§£å†³æ€è·¯ã€‚

è¯¥æ–¹æ¡ˆä¸ºé¡¹ç›®åˆæœŸè®¾è®¡ï¼Œé‡‡ç”¨ **ç»„ä»¶å†…å±€éƒ¨çŠ¶æ€æ§åˆ¶**ï¼Œè™½èƒ½å®ç°åŸºæœ¬åŠŸèƒ½ï¼Œä½†åœ¨ç±»åç»‘å®šã€æ ·å¼ä½œç”¨åŸŸã€åŠ¨ç”»æµç•…æ€§ç­‰æ–¹é¢å­˜åœ¨å…¸å‹è¯¯åŒºã€‚é€šè¿‡åˆ†æé—®é¢˜æ ¹æºå¹¶é€æ­¥ä¿®å¤ï¼Œæœ€ç»ˆå®ç°äº†å¹³æ»‘çš„æŠ˜å åŠ¨ç”»ä¸æ­£ç¡®çš„å¸ƒå±€å“åº”ã€‚

---

#### ğŸ” ä¸€ã€åŸå§‹ç»“æ„ä¸ç›®æ ‡

##### 1. é¡µé¢å¸ƒå±€ç»“æ„ï¼ˆç®€åŒ–ç‰ˆï¼‰

```vue
<div class="mana-lay">
  <!-- ä¾§è¾¹æ  -->
  <aside class="lay-sidebar">...</aside>

  <!-- ä¸»å®¹å™¨ -->
  <main class="lay-main-container">
    <header class="lay-header">Header</header>
    <div class="lay-hot-search">çƒ­æœèµ°é©¬ç¯</div>
    <div class="lay-main-content">ä¸»ä½“å†…å®¹</div>
  </main>
</div>
```

##### 2. è®¾è®¡ç›®æ ‡

| çŠ¶æ€ | ä¾§è¾¹æ å®½åº¦ | ä¸»å®¹å™¨ marginLeft | ä¸»å®¹å™¨å®½åº¦           |
| ---- | ---------- | ----------------- | -------------------- |
| å±•å¼€ | 200px      | 200px             | `calc(100% - 200px)` |
| æŠ˜å  | 63px       | 63px              | `calc(100% - 63px)`  |

âœ… æ‰€æœ‰å˜åŒ–éœ€å¸¦æœ‰ `0.3s` ç¼“åŠ¨åŠ¨ç”»ï¼Œè§†è§‰æµç•…ã€‚

---

#### âš ï¸ äºŒã€å¸¸è§é—®é¢˜åˆ†æï¼ˆåˆæœŸè®¾è®¡è¯¯åŒºï¼‰

âŒ **é—®é¢˜ 1ï¼šCSS é€‰æ‹©å™¨é”™è¯¯ â€”â€” `.lay-sidebar .is-collapse`**

```css
.lay-sidebar .is-collapse {
  width: 63px;
}
```

ğŸ”´ **é”™è¯¯åŸå› **ï¼š  
è¯¥å†™æ³•è¡¨ç¤º **`.lay-sidebar` å†…éƒ¨æœ‰ä¸€ä¸ªå­å…ƒç´ æ‹¥æœ‰ç±»å `is-collapse`**ï¼Œä½†å®é™…æ˜¯æƒ³è®© `.lay-sidebar` è‡ªèº«æ‹¥æœ‰è¿™ä¸ªç±»ã€‚

ğŸŸ¢ **æ­£ç¡®å†™æ³•**ï¼š

```css
.lay-sidebar.is-collapse {
  width: 63px;
}
```

âŒ **é—®é¢˜ 2ï¼šä¸»å®¹å™¨ç±»åç»‘å®šé”™è¯¯ â€”â€” `.lay-main-container.is-collapse`**

```css
.lay-main-container.is-collapse {
  margin-left: 63px;
  width: calc(100% - 63px);
}
```

ğŸ”´ **é—®é¢˜**ï¼š  
è™½ç„¶æ ·å¼æ­£ç¡®ï¼Œä½†å¦‚æœ Vue æ¨¡æ¿ä¸­æ²¡æœ‰æ­£ç¡®ç»‘å®š `:class`ï¼Œè¯¥ç±»æ°¸è¿œä¸ä¼šè¢«æ·»åŠ ï¼Œå¯¼è‡´æ ·å¼ä¸ç”Ÿæ•ˆã€‚

âŒ **é—®é¢˜ 3ï¼š`isCollapse` çŠ¶æ€æœªå®šä¹‰æˆ–éå“åº”å¼**

```js
const isCollapse = true // âŒ æ™®é€šå˜é‡ï¼Œéå“åº”å¼
```

ğŸ”´ **åæœ**ï¼š  
å³ä½¿åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ `:class="{ 'is-collapse': !isCollapse }"`ï¼Œå½“çŠ¶æ€æ”¹å˜æ—¶ï¼Œè§†å›¾ä¸ä¼šæ›´æ–°ã€‚

ğŸŸ¢ **æ­£ç¡®åšæ³•**ï¼š  
å¿…é¡»ä½¿ç”¨ `ref` æˆ– `reactive` åˆ›å»ºå“åº”å¼æ•°æ®ï¼š

```js
import { ref } from 'vue'
const isCollapse = ref(true) // âœ… å“åº”å¼
```

âŒ **é—®é¢˜ 4ï¼šç¼ºå°‘è¿‡æ¸¡åŠ¨ç”»ï¼ˆç”Ÿç¡¬è·³å˜ï¼‰**

```css
.lay-sidebar {
  width: 200px;
}
.lay-sidebar.is-collapse {
  width: 63px;
}
```

ğŸ”´ **é—®é¢˜**ï¼š  
å®½åº¦å˜åŒ–æ˜¯ç¬é—´å®Œæˆçš„ï¼Œæ— è¿‡æ¸¡æ•ˆæœã€‚

ğŸŸ¢ **ä¿®å¤**ï¼š  
æ·»åŠ  `transition`ï¼š

```css
.lay-sidebar {
  transition: width 0.3s ease;
}
.lay-main-container {
  transition:
    margin-left 0.3s ease,
    width 0.3s ease;
}
```

---

#### âœ… ä¸‰ã€å®ç°æ–¹æ¡ˆï¼ˆæ—  Pinia ç‰ˆï¼‰

##### 1. CSS æ ·å¼ï¼ˆä¿®å¤ç‰ˆï¼‰

```css
.mana-lay {
  min-height: 100vh;
  display: flex;
  background-color: #f8f8f8;
  --sidebar-width: 200px;
  --sidebar-collapsed-width: 63px;
  --transition-speed: 0.3s;
}

/* ä¾§è¾¹æ  */
.lay-sidebar {
  position: fixed;
  width: var(--sidebar-width);
  height: 100vh;
  z-index: 100;
  background: #fff;
  overflow-x: hidden;
}
/* ä¾§è¾¹æ æŠ˜å çŠ¶æ€ */
.lay-sidebar.is-collapse {
  width: var(--sidebar-collapsed-width);
}

/* ä¸»å®¹å™¨ */
.lay-main-container {
  display: flex;
  flex-direction: column;
  margin-left: var(--sidebar-width);
  width: calc(100% - var(--sidebar-width));
  flex: 1;
}
/* ä¸»å®¹å™¨æŠ˜å çŠ¶æ€ */
.lay-main-container.is-collapse {
  margin-left: var(--sidebar-collapsed-width);
  width: calc(100% - var(--sidebar-collapsed-width));
}

/* ç»Ÿä¸€è¿‡æ¸¡æ•ˆæœ */
.lay-sidebar,
.lay-main-container {
  transition: all var(--transition-speed) ease;
}
```

---

##### 2. Vue æ¨¡æ¿ï¼ˆå…³é”®ï¼šæ­£ç¡®ç»‘å®šç±»åï¼‰

```vue
<template>
  <div class="mana-lay">
    <!-- ä¾§è¾¹æ ï¼šæ ¹æ® isCollapse çŠ¶æ€æ·»åŠ  is-collapse ç±» -->
    <aside class="lay-sidebar" :class="{ 'is-collapse': isCollapse }">
      <el-menu :collapse="isCollapse">
        <el-menu-item index="1">é¦–é¡µ</el-menu-item>
        <el-menu-item index="2">ç”¨æˆ·ç®¡ç†</el-menu-item>
      </el-menu>
    </aside>

    <!-- ä¸»å®¹å™¨ï¼šåŒæ ·å“åº” isCollapse çŠ¶æ€ -->
    <main class="lay-main-container" :class="{ 'is-collapse': isCollapse }">
      <header class="lay-header">Header</header>
      <div class="lay-hot-search">çƒ­æœèµ°é©¬ç¯</div>
      <div class="lay-main-content">ä¸»ä½“å†…å®¹</div>
    </main>
  </div>
</template>

<script setup>
import { ref } from 'vue'

// æ§åˆ¶æŠ˜å çŠ¶æ€ï¼štrue è¡¨ç¤ºæŠ˜å ï¼Œfalse è¡¨ç¤ºå±•å¼€ï¼ˆé»˜è®¤ï¼‰
const isCollapse = ref(false)
</script>
```

ğŸ“Œ **å…³é”®ç‚¹è¯´æ˜**ï¼š

- `:class="{ 'is-collapse': isCollapse }"`ï¼šå½“ `isCollapse` ä¸º `true` æ—¶ï¼Œæ·»åŠ  `is-collapse` ç±»
- `el-menu` çš„ `:collapse` å±æ€§åŒæ­¥çŠ¶æ€ï¼Œå®ç°èœå•æ”¶èµ·
- æ‰€æœ‰å®¹å™¨é€šè¿‡ç±»å `.is-collapse` è§¦å‘ CSS ä¸­å®šä¹‰çš„æŠ˜å æ ·å¼

---

##### 3. å¯é€‰ï¼šæ›´ä¼˜é›…çš„æ–¹æ¡ˆ â€”â€” ä½¿ç”¨æ ¹çº§çŠ¶æ€ç±»

é¿å…åœ¨æ¯ä¸ªå…ƒç´ ä¸Šé‡å¤å†™ `:class`ï¼Œæ”¹ä¸ºï¼š

```html
<template>
  <!-- åœ¨æ ¹å®¹å™¨ä¸Šæ·»åŠ çŠ¶æ€ç±» -->
  <div class="mana-lay" :class="{ 'sidebar-collapse': isCollapse }">
    <aside class="lay-sidebar">...</aside>
    <main class="lay-main-container">...</main>
  </div>
</template>
```

```css
/* ä½¿ç”¨åä»£é€‰æ‹©å™¨æ§åˆ¶ */
.mana-lay.sidebar-collapse .lay-sidebar {
  width: var(--sidebar-collapsed-width);
}

.mana-lay.sidebar-collapse .lay-main-container {
  margin-left: var(--sidebar-collapsed-width);
  width: calc(100% - var(--sidebar-collapsed-width));
}
```

âœ… **ä¼˜ç‚¹**ï¼š

- å‡å°‘æ¨¡æ¿ä¸­ `:class` çš„é‡å¤ç»‘å®š
- æ ·å¼é›†ä¸­æ§åˆ¶ï¼Œç»“æ„æ›´æ¸…æ™°
- æ˜“äºæ‰©å±•ï¼ˆå¦‚æ·»åŠ  `.theme-dark` ç­‰å…¨å±€çŠ¶æ€ï¼‰

---

#### âœ… å››ã€æœ€ç»ˆæ•ˆæœéªŒè¯

| çŠ¶æ€ | ç±»å              | ä¾§è¾¹æ å®½åº¦ | ä¸»å®¹å™¨ marginLeft | åŠ¨ç”»     |
| ---- | ----------------- | ---------- | ----------------- | -------- |
| å±•å¼€ | æ—  `.is-collapse` | 200px      | 200px             | å¹³æ»‘è¿‡æ¸¡ |
| æŠ˜å  | æœ‰ `.is-collapse` | 63px       | 63px              | å¹³æ»‘è¿‡æ¸¡ |

æ‰€æœ‰å˜åŒ–å‡é€šè¿‡ CSS `transition` å®ç°ï¼Œæ—  JS åŠ¨ç”»ï¼Œæ€§èƒ½è‰¯å¥½ã€‚

#### ğŸ“Š äº”ã€æ€»ç»“å¯¹æ¯”

| é—®é¢˜           | é”™è¯¯åšæ³•                    | æ­£ç¡®åšæ³•                                        |
| -------------- | --------------------------- | ----------------------------------------------- |
| ç±»åé€‰æ‹©å™¨é”™è¯¯ | `.lay-sidebar .is-collapse` | `.lay-sidebar.is-collapse`                      |
| çŠ¶æ€éå“åº”å¼   | `const isCollapse = true`   | `const isCollapse = ref(true)`                  |
| ç±»åæœªç»‘å®š     | æ¨¡æ¿ä¸­æ—  `:class`           | ä½¿ç”¨ `:class="{ 'is-collapse': isCollapse }"`   |
| æ— åŠ¨ç”»         | ç›´æ¥ä¿®æ”¹ width              | æ·»åŠ  `transition`                               |
| ç»“æ„è€¦åˆ       | æ¯ä¸ªå…ƒç´ å•ç‹¬ç»‘å®š            | æ¨èä½¿ç”¨æ ¹çº§çŠ¶æ€ç±» `.mana-lay.sidebar-collapse` |

#### ğŸš€ åç»­ä¼˜åŒ–æ–¹å‘

è™½ç„¶æ­¤æ–¹æ¡ˆåœ¨æ— çŠ¶æ€ç®¡ç†ä¸‹å¯è¡Œï¼Œä½†ä»å­˜åœ¨å±€é™ï¼š

- çŠ¶æ€åˆ†æ•£ï¼Œéš¾ä»¥è·¨ç»„ä»¶å…±äº«
- å¤šä¸ªå¸ƒå±€ç»„ä»¶éœ€é‡å¤å¼•å…¥ `isCollapse`
- ä¸åˆ©äºå¤§å‹é¡¹ç›®ç»´æŠ¤

âœ… **æ¨èå‡çº§è·¯å¾„**ï¼š
ğŸ‘‰ å¼•å…¥ **Pinia** è¿›è¡Œå…¨å±€çŠ¶æ€ç®¡ç†ï¼Œå°† `isCollapse` æå‡è‡³ storeï¼Œå®ç°ï¼š

- çŠ¶æ€é›†ä¸­ç®¡ç†
- å¤šç»„ä»¶è‡ªåŠ¨åŒæ­¥
- æ›´æ¸…æ™°çš„é¡¹ç›®æ¶æ„

---

ğŸ“… æ›´æ–°æ—¶é—´ï¼š2025å¹´10æœˆ25æ—¥  
ğŸ‘¤ ç¼–å†™ï¼šç³»ç»ŸåŠ©æ‰‹  
ğŸ¯ ç›®æ ‡ï¼šå¸®åŠ©å¼€å‘è€…ç†è§£åˆæœŸå¸ƒå±€é—®é¢˜ï¼Œä¸ºåç»­å¼•å…¥ Pinia æ‰“ä¸‹åŸºç¡€
