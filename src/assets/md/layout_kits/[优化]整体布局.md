å¦‚ä¸‹æ˜¯æˆ‘çš„å¸ƒå±€å®¹å™¨çš„æ ·å¼ä»£ç ï¼Œæˆ‘é¢„æƒ³çš„æ˜¯é€šè¿‡æ˜¯å¦æŠ˜å çŠ¶æ€å˜é‡æ§åˆ¶å·¦ä¾§ä¾§è¾¹æ èœå•æ—¶ï¼Œå³è¾¹çš„å†…å®¹å¯ä»¥å“åº”å¼è°ƒæ•´ï¼Œæˆ‘çš„æ ·å¼ä»£ç ä¸­æ˜¯è®¾ç½®margin-leftå’ŒåŠ¨æ€è®¡ç®—widthå®ç°ï¼Œä½†æ˜¯æ•ˆæœæ²¡æœ‰ï¼Œéº»çƒ¦ç»™å‡ºä¿®æ”¹æ–¹æ¡ˆï¼š

```css
.common-layout {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  background-color: var(--color-bg-overlay, #f8f8f8);
  --sidebar-width: 200px;
  --sidebar-collapsed-width: 63px;
  --transition-speed: 0.3s;
}

.lay-sidebar {
  position: fixed;
  width: var(--sidebar-width);
  z-index: 100;
}
.lay-sidebar .is-collapse {
  width: var(--sidebar-collapsed-width);
}

/* ä¸»å®¹å™¨ */
.lay-main-container {
  display: flex;
  margin-left: var(--sidebar-width);
  width: calc(100% - var(--sidebar-width));
  flex: 1;
  flex-direction: column;
  transition:
    margin-left var(--transition-speed) ease,
    width var(--transition-speed) ease;
}
.lay-main-container.is-collapse {
  margin-left: var(--sidebar-collapsed-width);
  width: calc(100% - var(--sidebar-collapsed-width));
}
```

ä½ å½“å‰çš„æ ·å¼ä»£ç é€»è¾‘æ€è·¯æ­£ç¡®ï¼Œä½† **å­˜åœ¨å…³é”®çš„ç±»åç»‘å®šé”™è¯¯å’Œç»“æ„é—®é¢˜**ï¼Œå¯¼è‡´æŠ˜å çŠ¶æ€æ— æ³•æ­£ç¡®è§¦å‘æ ·å¼å˜åŒ–ã€‚æ ¸å¿ƒé—®é¢˜æ˜¯ï¼š

> âŒ `.lay-sidebar .is-collapse` å’Œ `.lay-main-container.is-collapse` çš„ä½¿ç”¨æ–¹å¼ä¸ç¬¦åˆå®é™… DOM ç»“æ„ã€‚

---

### ğŸ” é—®é¢˜åˆ†æ

#### 1. `.lay-sidebar .is-collapse` é”™è¯¯

```css
.lay-sidebar .is-collapse {
  width: var(--sidebar-collapsed-width);
}
```

- è¿™è¡¨ç¤ºï¼š**åœ¨ `.lay-sidebar` å†…éƒ¨æœ‰ä¸€ä¸ªå­å…ƒç´ æ‹¥æœ‰ç±»å `is-collapse`**ã€‚
- ä½†é€šå¸¸ä½ æ˜¯æŠŠ `is-collapse` åŠ åœ¨ `.lay-sidebar` **è‡ªèº«**ä¸Šï¼Œè€Œä¸æ˜¯å®ƒçš„å­å…ƒç´ ã€‚

âœ… æ­£ç¡®åº”ä¸ºï¼š

```css
.lay-sidebar.is-collapse {
  width: var(--sidebar-collapsed-width);
}
```

#### 2. `.lay-main-container.is-collapse` åŒæ ·é”™è¯¯

```css
.lay-main-container.is-collapse { ... }
```

- è¿™è¦æ±‚ `.lay-main-container` è‡ªèº«æœ‰ `is-collapse` ç±»ã€‚
- ä½†åœ¨å®é™…ä¸­ï¼Œè¿™ä¸ªç±»å¾ˆå¯èƒ½æ²¡æœ‰è¢«æ­£ç¡®ç»‘å®šåˆ°è¯¥å…ƒç´ ä¸Šã€‚

---

### âœ… æ­£ç¡®çš„å®ç°æ–¹å¼ï¼ˆæ¨èï¼‰

ä½ åº”è¯¥é€šè¿‡ä¸€ä¸ª **çˆ¶çº§çŠ¶æ€ç±»**ï¼ˆå¦‚ `.sidebar-collapse`ï¼‰æ¥æ§åˆ¶æ•´ä¸ªå¸ƒå±€çš„æŠ˜å çŠ¶æ€ï¼Œè€Œä¸æ˜¯æŠŠ `is-collapse` åˆ†æ•£åœ¨å„ä¸ªç»„ä»¶ä¸Šã€‚

---

### âœ… ä¿®æ”¹åçš„å®Œæ•´æ–¹æ¡ˆ

#### âœ… 1. CSS æ ·å¼ï¼ˆä¿®å¤ç‰ˆï¼‰

```css
.common-layout {
  min-height: 100vh;
  display: flex;
  flex-direction: column;
  background-color: var(--color-bg-overlay, #f8f8f8);
  --sidebar-width: 200px;
  --sidebar-collapsed-width: 63px;
  --transition-speed: 0.3s;
}

/* ä¾§è¾¹æ  */
.lay-sidebar {
  position: fixed;
  top: 0;
  left: 0;
  width: var(--sidebar-width);
  height: 100vh;
  z-index: 100;
  background-color: #fff;
  border-right: 1px solid #eaeaea;
  transition: width var(--transition-speed) ease; /* å¹³æ»‘è¿‡æ¸¡ */
  overflow-x: hidden;
}

/* ä¾§è¾¹æ æŠ˜å çŠ¶æ€ï¼šç±»åç›´æ¥åŠ åœ¨ .lay-sidebar ä¸Š */
.lay-sidebar.is-collapse {
  width: var(--sidebar-collapsed-width);
}

/* ä¸»å®¹å™¨ */
.lay-main-container {
  display: flex;
  margin-left: var(--sidebar-width);
  width: calc(100% - var(--sidebar-width));
  flex: 1;
  flex-direction: column;
  transition:
    margin-left var(--transition-speed) ease,
    width var(--transition-speed) ease;
}

/* ä¸»å®¹å™¨åœ¨æŠ˜å çŠ¶æ€ä¸‹çš„æ ·å¼ */
.lay-main-container.is-collapse {
  margin-left: var(--sidebar-collapsed-width);
  width: calc(100% - var(--sidebar-collapsed-width));
}
```

---

#### âœ… 2. Vue æ¨¡æ¿ï¼ˆå…³é”®ï¼šæ­£ç¡®ç»‘å®šç±»åï¼‰

```vue
<template>
  <div class="common-layout">
    <!-- ä¾§è¾¹æ ï¼šæ ¹æ® isCollapse çŠ¶æ€åŠ¨æ€æ·»åŠ  is-collapse ç±» -->
    <aside class="lay-sidebar" :class="{ 'is-collapse': !isCollapse }">
      <!-- èœå•å†…å®¹ -->
      <el-menu :collapse="!isCollapse">
        <el-menu :collapse="!isCollapse">
          <!-- èœå•é¡¹ -->
        </el-menu>
      </el-menu>
    </aside>

    <!-- ä¸»å®¹å™¨ï¼šåŒæ ·æ ¹æ® isCollapse çŠ¶æ€æ§åˆ¶ç±»å -->
    <main class="lay-main-container" :class="{ 'is-collapse': !isCollapse }">
      <!-- å¤´éƒ¨ -->
      <header class="lay-header">Header</header>

      <!-- çƒ­æœèµ°é©¬ç¯ -->
      <div class="lay-hot-search">
        <el-icon class="bell-icon"><Bell /></el-icon>
        <el-carousel height="40px" direction="vertical" :autoplay="true">
          <el-carousel-item v-for="item in hotSearches" :key="item">
            <span>{{ item }}</span>
          </el-carousel-item>
        </el-carousel>
      </div>

      <!-- ä¸»ä½“å†…å®¹ -->
      <div class="lay-main-content">
        <slot />
      </div>
    </main>
  </div>
</template>

<script setup>
import { ref } from 'vue'

// æ§åˆ¶æŠ˜å çŠ¶æ€ï¼štrue è¡¨ç¤ºå±•å¼€ï¼Œfalse è¡¨ç¤ºæŠ˜å 
const isCollapse = ref(false)
const hotSearches = ['çƒ­æœ1', 'çƒ­æœ2', 'çƒ­æœ3']

// æä¾›ç»™æŠ˜å æŒ‰é’®è°ƒç”¨
const toggleCollapse = () => {
  isCollapse.value = !isCollapse.value
}
</script>
```

---

### âœ… 3. å¯é€‰ï¼šæ›´ä¼˜é›…çš„æ–¹æ¡ˆï¼ˆä½¿ç”¨æ ¹çº§çŠ¶æ€ç±»ï¼‰

ä½ ä¹Ÿå¯ä»¥ä¸åœ¨æ¯ä¸ªå…ƒç´ ä¸ŠåŠ  `:class`ï¼Œè€Œæ˜¯é€šè¿‡ç»™ `.common-layout` æ·»åŠ ä¸€ä¸ªçŠ¶æ€ç±»ï¼Œç„¶åç”¨åä»£é€‰æ‹©å™¨æ§åˆ¶ï¼š

#### CSS

```css
.common-layout.sidebar-collapse .lay-sidebar {
  width: var(--sidebar-collapsed-width);
}

.common-layout.sidebar-collapse .lay-main-container {
  margin-left: var(--sidebar-collapsed-width);
  width: calc(100% - var(--sidebar-collapsed-width));
}
```

#### æ¨¡æ¿

```html
<div class="common-layout" :class="{ 'sidebar-collapse': !isCollapse }">
  <aside class="lay-sidebar">...</aside>
  <main class="lay-main-container">...</main>
</div>
```

> âœ… ä¼˜ç‚¹ï¼šæ›´ç®€æ´ï¼Œæ ·å¼é›†ä¸­æ§åˆ¶ï¼Œé¿å…é‡å¤ç»‘å®š `:class`ã€‚

---

### âœ… åŠ¨ç”»æ•ˆæœå¢å¼ºï¼ˆå¯é€‰ï¼‰

ç¡®ä¿æ‰€æœ‰å˜åŒ–éƒ½æœ‰å¹³æ»‘è¿‡æ¸¡ï¼š

```css
.lay-sidebar,
.lay-main-container {
  transition: all 0.3s ease;
}
```

---

### âœ… æœ€ç»ˆæ•ˆæœ

| çŠ¶æ€                        | ä¾§è¾¹æ å®½åº¦ | ä¸»å®¹å™¨ `margin-left` | ä¸»å®¹å™¨å®½åº¦           |
| --------------------------- | ---------- | -------------------- | -------------------- |
| å±•å¼€ (`isCollapse = true`)  | 200px      | 200px                | `calc(100% - 200px)` |
| æŠ˜å  (`isCollapse = false`) | 63px       | 63px                 | `calc(100% - 63px)`  |

å¹¶ä¸”æ‰€æœ‰å˜åŒ–éƒ½å¸¦æœ‰ **0.3 ç§’ç¼“åŠ¨åŠ¨ç”»**ï¼Œè§†è§‰æµç•…ã€‚

---

### âœ… è°ƒè¯•å»ºè®®

1. æ‰“å¼€æµè§ˆå™¨å¼€å‘è€…å·¥å…·
2. æ‰‹åŠ¨ç»™ `.lay-sidebar` å’Œ `.lay-main-container` æ·»åŠ  `is-collapse` ç±»
3. è§‚å¯Ÿæ ·å¼æ˜¯å¦ç”Ÿæ•ˆ
4. å¦‚æœç”Ÿæ•ˆï¼Œè¯´æ˜æ˜¯ Vue çš„ `:class` ç»‘å®šæ²¡è§¦å‘ï¼Œè¯·æ£€æŸ¥ `isCollapse` å˜é‡æ˜¯å¦å“åº”å¼ï¼ˆç”¨ `ref` æˆ– `reactive`ï¼‰

---

### âœ… æ€»ç»“

| é—®é¢˜                        | ä¿®å¤æ–¹æ¡ˆ                                               |
| --------------------------- | ------------------------------------------------------ |
| `.lay-sidebar .is-collapse` | æ”¹ä¸º `.lay-sidebar.is-collapse`                        |
| ç±»åæœªæ­£ç¡®ç»‘å®š              | åœ¨æ¨¡æ¿ä¸­ä½¿ç”¨ `:class="{ 'is-collapse': !isCollapse }"` |
| åŠ¨ç”»ç¼ºå¤±                    | æ·»åŠ  `transition`                                      |
| ç»“æ„è€¦åˆ                    | æ¨èä½¿ç”¨ `.common-layout.sidebar-collapse` ç»Ÿä¸€æ§åˆ¶    |

æŒ‰ç…§ä¸Šè¿°æ–¹æ¡ˆä¿®æ”¹åï¼Œä½ çš„å¸ƒå±€å°†èƒ½**æ­£ç¡®å“åº”æŠ˜å çŠ¶æ€ï¼Œå®ç°å¹³æ»‘çš„å®½åº¦å˜åŒ–**ã€‚
